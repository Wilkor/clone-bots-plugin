(this["webpackJsonpblip-plugin-example"]=this["webpackJsonpblip-plugin-example"]||[]).push([[0],{163:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),s=a(6),i=a.n(s),l=a(12),u=a(7),p=(a(80),a(18)),m=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.IframeMessageProxy.sendMessage({action:"getApplication"});case 2:return t=e.sent,a=t.response,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(e){return p.IframeMessageProxy.sendMessage({action:"toast",content:e})},b=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.IframeMessageProxy.sendMessage({action:"startLoading"}),e.prev=1,e.next=4,t();case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,p.IframeMessageProxy.sendMessage({action:"stopLoading"}),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=e.title;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pv2 header"},r.a.createElement("h1",{className:"bp-fs-3 bp-c-city"},t)),r.a.createElement("div",{className:"bp-divider-h"}))},g=a(22),h=(a(63),a(23)),v=function(e,t){switch(t.type){case"setLanguage":return Object(h.a)(Object(h.a)({},e),{},{language:t.language.toLowerCase()});case"setLoading":return Object(h.a)(Object(h.a)({},e),{},{loading:t.loading});case"setLoggedUser":return Object(h.a)(Object(h.a)({},e),{},{loggedUser:t.loggedUser});default:throw new Error("CommonReducer: invalid action called ".concat(t.type))}},y=(a(34),a(88),r.a.createContext()),E=function(e){var t=r.a.useReducer(v,{language:"pt",loading:!1}),a=Object(u.a)(t,2),n=a[0],o=a[1],c=r.a.useMemo((function(){return[n,o]}),[n]);return r.a.createElement(y.Provider,Object.assign({value:c},e))},k=(a(89),function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pv4"},r.a.createElement("div",{className:"bp-card bp-card--left-arrow"},t)))}),j=a(64),x=a(35),O=a(65),w=Object(O.create)({baseURL:"https://http.msging.net"}),C=function(e,t){return w.post("/commands",{id:e,method:"get",uri:"/buckets/blip_portal:builder_working_configuration?$take=1000"},{headers:{"Content-Type":"application/json",Authorization:t}})},N=function(e,t,a){return w.post("/commands",{id:e,method:"set",resource:t,type:"application/json",uri:"/buckets/blip_portal%3Abuilder_published_configuration"},{headers:{"Content-Type":"application/json",Authorization:a}})},S=function(e,t,a){w.post("/commands",{id:e,method:"set",resource:t,type:"application/json",uri:"/buckets/blip_portal%3Abuilder_working_configuration"},{headers:{"Content-Type":"application/json",Authorization:a}})},T=function(e,t){return w.post("/commands",{id:e,method:"get",uri:"/buckets/blip_portal:builder_working_flow?$take=100"},{headers:{"Content-Type":"application/json",Authorization:t}})},I=function(e,t){return w.post("/commands",{id:e,method:"get",uri:"/buckets/blip_portal:builder_working_global_actions?$take=100"},{headers:{"Content-Type":"application/json",Authorization:t}})},_=function(e,t,a){return w.post("/commands",{id:e,method:"set",resource:t,type:"application/json",uri:"/buckets/blip_portal%3Abuilder_published_global_actions"},{headers:{"Content-Type":"application/json",Authorization:a}})},A=function(e,t){return w.post("/commands",{id:"61d82a14-adf0-4ddd-aeb1-73736eca083e",method:"set",resource:e,type:"application/json",uri:"/buckets/blip_portal%3Abuilder_working_flow"},{headers:{"Content-Type":"application/json",Authorization:t}})},z=function(e,t,a){return w.post("/commands",{id:e,method:"set",resource:t,type:"application/json",uri:"/buckets/blip_portal%3Abuilder_published_flow"},{headers:{"Content-Type":"application/json",Authorization:a}})},M=function(e,t,a){return w.post("/commands",{id:e,method:"set",resource:t,type:"application/json",uri:"/buckets/blip_portal%3Abuilder_working_global_actions"},{headers:{"Content-Type":"application/json",Authorization:a}})},P=function(e,t){return w.post("/commands",{id:e,method:"get",uri:"/resources?$take=100000"},{headers:{"Content-Type":"application/json",Authorization:t}})},R=function(e,t,a){return w.post("/commands",{id:e,method:"get",uri:"/resources/".concat(a)},{headers:{"Content-Type":"application/json",Authorization:t}})},B=function(e,t,a,n,r){return w.post("/commands",{id:e,method:"set",uri:encodeURI("/resources/"+n.trim()),type:a,resource:r},{headers:{"Content-Type":"application/json",Authorization:t}})},L=function(e,t){return w.post("/commands",{id:e,to:"postmaster@desk.msging.net",method:"get",uri:"/rules"},{headers:{"Content-Type":"application/json",Authorization:t}})},D=function(e,t,a){return w.post("/commands",{id:e,to:"postmaster@desk.msging.net",method:"set",uri:"/rules",type:"application/vnd.iris.desk.rule+json",resource:t},{headers:{"Content-Type":"application/json",Authorization:a}})},F=a(39),H=a.n(F),U=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};a(44);var $=function(){var e=Object(n.useState)(localStorage.getItem("keyOne")),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(localStorage.getItem("keyTwo")),s=Object(u.a)(c,2),p=s[0],m=s[1],b=Object(n.useState)(!1),f=Object(u.a)(b,2),g=f[0],h=f[1],v=Object(n.useState)(!1),y=Object(u.a)(v,2),E=y[0],k=y[1],j=Object(n.useState)(!1),O=Object(u.a)(j,2),w=O[0],F=O[1];function $(){return($=Object(l.a)(i.a.mark((function e(t){var n,r,c,s,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a||p){e.next=4;break}return K("Data is missing. Please check the Source and Destination Keys!!","warning","Notice!"),e.abrupt("return",!1);case 4:if(a.includes("Key")){e.next=7;break}return K("key typed, is not a valid key!","warning","Notice!"),e.abrupt("return",!1);case 7:if(w||E||g){e.next=10;break}return K("Choose an option to clone!","warning","Notice!"),e.abrupt("return",!1);case 10:if(!w){e.next=35;break}return e.next=13,C(U(),a);case 13:return n=e.sent,r=n.data,e.next=17,N(U(),r.resource,p);case 17:return e.next=19,S(U(),r.resource,p);case 19:return e.next=21,T(U(),a);case 21:return c=e.sent,e.next=24,A(c.data.resource,p);case 24:return e.next=26,z(U(),c.data.resource,a);case 26:return e.next=28,I(U(),a);case 28:return s=e.sent,e.next=31,M(U(),s.data.resource,p);case 31:return e.next=33,_(U(),c.data.resource,p);case 33:200===e.sent.status?(K("Bot cloned successfully","success","Done!"),o(""),m(""),F(!1)):K("Error cloning bot","error","Error!");case 35:if(!g){e.next=40;break}return e.next=38,P(U(),a);case 38:"failure"!==(u=e.sent).data.status?(u.data.resource.items.forEach(function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(U(),a,t);case 2:return n=e.sent,e.next=5,B(U(),p,n.data.type,t,n.data.resource);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K("Successfully Cloned Resources","success","Done!"),h(!1)):K("There are no resources to clone","warning","Notice!");case 40:if(!E){e.next=45;break}return e.next=43,L(U(),a);case 43:"failure"!==(d=e.sent).data.status?(d.data.resource.items.forEach(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(U(),t,p);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K("Successfully cloned rules","success","Done!"),k(!1)):K("There are no rules for cloning","warning","Notice!");case 45:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t,a){setTimeout((function(){d({type:t,message:e})}),900)}var J=r.a.createElement("div",{className:"fadeIn animated",style:{padding:"30px"}},r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:""},r.a.createElement("form",{className:""},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{value:a,onChange:function(e){return t=e.target.value,o(t),void localStorage.setItem("keyOne",t);var t},type:"text",name:"origem",className:"form-control",placeholder:"Enter the source bot key.",required:!0})),r.a.createElement("div",{className:"container-switch"},r.a.createElement("label",null,r.a.createElement("span",null,"Builder: "),r.a.createElement(H.a,{onChange:function(e){F(e)},checked:w,onColor:"#3f7de8"})),r.a.createElement("label",null,r.a.createElement("span",null,"Recursos: "),r.a.createElement(H.a,{onChange:function(e){h(e)},checked:g,onColor:"#3f7de8"})),r.a.createElement("label",null,r.a.createElement("span",null,"Regras: "),r.a.createElement(H.a,{onChange:function(e){k(e)},checked:E,onColor:"#3f7de8"}))),r.a.createElement("div",{className:"container-buttons"},r.a.createElement("button",{type:"submit",onClick:function(e){return $.apply(this,arguments)},style:{marginRight:"10px"},className:"bp-btn bp-btn--bot bp-btn--small"},"Clone Bot"),r.a.createElement("button",{type:"button",onClick:function(){localStorage.removeItem("keyOne"),o(""),m("")},style:{marginRight:"10px"},className:"bp-btn bp-btn--bot bp-btn--small"},"Clear"))))),r.a.createElement(x.NotificationContainer,null));return r.a.createElement("div",{className:""},J)},K=a(194),J=a(201),G=a(198),X=a(204),Y=a(196),W=a(205),Z=a(200),q=a(199),Q=a(203),V=a(202),ee=a(197),te={botMarketPlace:"Key cGFyc2VtYXJrZXRwbGFjZTpwQzFXOGNuc1RmYnJ2dHRUMFFDOA==",botMarketPlaceTarget:""},ae=Object(K.a)((function(e){return{root:{margin:"auto",marginTop:"-35px",marginButton:"10px",marginLeft:"-30px"},cardHeader:{padding:e.spacing(1,2),fontFamily:"Nunito Sans, Helvetica, sans-serif"},list:{width:300,height:180,backgroundColor:e.palette.background.paper,maxHeight:200,overflow:"auto"},button:{margin:e.spacing(.5,0)}}}));function ne(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function re(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}function oe(){Object(n.useEffect)((function(){L()}),[]);var e=ae(),t=Object(n.useState)([]),a=Object(u.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)([]),p=Object(u.a)(s,2),m=p[0],b=p[1],f=Object(n.useState)([]),h=Object(u.a)(f,2),v=h[0],y=h[1],E=Object(n.useState)(te.botMarketPlace),k=Object(u.a)(E,2),j=k[0],x=(k[1],Object(n.useState)(localStorage.getItem("keyTarget"))),O=Object(u.a)(x,2),w=(O[0],O[1],Object(n.useState)()),C=Object(u.a)(w,2),N=(C[0],C[1]),S=Object(n.useState)(),I=Object(u.a)(S,2),_=(I[0],I[1]),z=re(o,m),M=re(o,v),P=function(e){return function(){var t=o.indexOf(e),a=Object(g.a)(o);-1===t?a.push(e):a.splice(t,1),c(a)}},R=function(e){return re(o,e).length},B=function(e){return function(){var t,a;R(e)===e.length?c(ne(o,e)):c((t=o,a=e,[].concat(Object(g.a)(t),Object(g.a)(ne(a,t)))))}},L=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(U(),j);case 2:t=e.sent,N(t),a=Object.keys(t.data.resource).filter((function(e){return"onboarding"!==e&&"fallback"!==e})),n=[],a.forEach((function(e){n.push({boxId:t.data.resource[e].id,boxText:t.data.resource[e].$title})})),b(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n,r,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(alert(localStorage.getItem("keyTarget")),""!==localStorage.getItem("keyTarget")){e.next=4;break}return F("Please check the destination key field!","warning","Notice!"),e.abrupt("return",!1);case 4:return e.next=6,localStorage.getItem("keyTarget");case 6:return t=e.sent,e.next=9,T(U(),t);case 9:return a=e.sent,e.next=12,T(U(),j);case 12:return n=e.sent,r=a,o=n,c=v,console.log(r),c.forEach((function(e){r.data.resource[e.boxId]=o.data.resource[e.boxId]})),e.next=20,A(r.data.resource,t);case 20:200===e.sent.status?(F("Your box has been cloned successfully","success","Done!"),L(),y([])):F("Error cloning your box","danger","Error!");case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e,t,a){setTimeout((function(){N([]),_([]),d({type:t,message:e})}),900)},H=function(t,a){return r.a.createElement(X.a,null,r.a.createElement(Y.a,{className:e.cardHeader,avatar:r.a.createElement(Q.a,{onClick:B(a),checked:R(a)===a.length&&0!==a.length,indeterminate:R(a)!==a.length&&0!==R(a),disabled:0===a.length,inputProps:{"aria-label":"all items selected"},color:"primary"}),title:t,subheader:"".concat(R(a),"/").concat(a.length," selected")}),r.a.createElement(ee.a,null),r.a.createElement(G.a,{className:e.list,dense:!0,component:"div",role:"list"},a.map((function(e){var t="transfer-list-all-item-".concat(e.boxId,"-label");return r.a.createElement(W.a,{key:e.boxId,role:"listitem",button:!0,onClick:P(e)},r.a.createElement(q.a,null,r.a.createElement(Q.a,{checked:-1!==o.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t},color:"primary"})),r.a.createElement(Z.a,{primaryTypographyProps:{style:{fontSize:14}},id:t,primary:"".concat(e.boxText)}))})),r.a.createElement(W.a,null)))},$=function(){return r.a.createElement("div",{className:"container-buttons"},r.a.createElement("button",{type:"submit",onClick:D,style:{marginLeft:"30px",width:"228px"},className:"bp-btn bp-btn--bot bp-btn--small"},"Clone"))};return r.a.createElement("div",null,r.a.createElement(J.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",className:e.root},r.a.createElement(J.a,{item:!0},H("Choices",m)),r.a.createElement(J.a,{item:!0},r.a.createElement(J.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(V.a,{variant:"outlined",size:"small",className:e.button,onClick:function(){y(v.concat(z)),b(ne(m,z)),c(ne(o,z))},disabled:0===z.length,"aria-label":"move selected right"},">"),r.a.createElement(V.a,{variant:"outlined",size:"small",className:e.button,onClick:function(){b(m.concat(M)),y(ne(v,M)),c(ne(o,M))},disabled:0===M.length,"aria-label":"move selected left"},"<"))),r.a.createElement(J.a,{item:!0},H("Chosen",v))),r.a.createElement($,null))}var ce=function(){var e=Object(n.useState)(localStorage.getItem("keyTarget")),t=Object(u.a)(e,2),a=(t[0],t[1],r.a.createElement("div",{className:"fadeIn animated",style:{padding:"30px"}},r.a.createElement("div",{className:"home"})));return r.a.createElement("div",{className:""},a,r.a.createElement(oe,null),r.a.createElement(x.NotificationContainer,null))};var se=function(){var e=Object(n.useState)({shortName:"Clone Bots"}),t=Object(u.a)(e,2),a=t[0],o=(t[1],Object(n.useState)([])),c=Object(u.a)(o,2),s=(c[0],c[1],Object(n.useState)([])),p=Object(u.a)(s,2),g=(p[0],p[1],function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d({type:"success",message:"Success loaded"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(n.useEffect)((function(){b(Object(l.a)(i.a.mark((function e(){var t,a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m();case 3:return t=e.sent,a=t.accessKey,n=t.shortName,r="Key "+btoa("".concat(n,":")+atob(a)),localStorage.setItem("keyTwo",r),localStorage.setItem("keyTarget",r),new j.BlipTabs("tab-nav"),e.next=12,g();case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))))}),[]);var h=a.shortName;return r.a.createElement(E,null,r.a.createElement("div",{id:"main",className:"App"},r.a.createElement(f,{title:h}),r.a.createElement(k,{title:h},r.a.createElement("div",{id:"tab-nav",className:"bp-tabs-container"},r.a.createElement("ul",{className:"bp-tab-nav"},r.a.createElement("li",null,r.a.createElement("a",{href:"#","data-ref":"clonebots"},"Clone bots")),r.a.createElement("li",null,r.a.createElement("a",{href:"#","data-ref":"marketplace"},"MarketPlace"))),r.a.createElement("div",{className:"bp-tab-content fl w-100","data-ref":"clonebots"},r.a.createElement($,null)),r.a.createElement("div",{className:"bp-tab-content fl w-100","data-ref":"marketplace"},r.a.createElement(ce,null))))))};a(163),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=a(67);a(166);p.IframeMessageProxy.listen();var le=document.getElementById("root");new ie.ResizeObserver((function(){var e;e=le.scrollHeight,p.IframeMessageProxy.sendMessage({action:"heightChange",content:e})})).observe(le),c.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},74:function(e,t,a){e.exports=a(167)},89:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.aae1d220.chunk.js.map